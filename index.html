<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="怕什么真理无穷,进一寸有一寸的欢喜">
<meta property="og:type" content="website">
<meta property="og:title" content="Eric'Blog">
<meta property="og:url" content="http://yoururl.com/index.html">
<meta property="og:site_name" content="Eric'Blog">
<meta property="og:description" content="怕什么真理无穷,进一寸有一寸的欢喜">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eric'Blog">
<meta name="twitter:description" content="怕什么真理无穷,进一寸有一寸的欢喜">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoururl.com/"/>





  <title> Eric'Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Eric'Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoururl.com/2016/12/24/Carthage去中心化依赖管理/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Eric">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://octgh9scz.bkt.clouddn.com/chunyang.jpeg?attname=&e=1482553833&token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:dSl5qVAdWDhwneji7ZP7NIOPZ9w">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Eric'Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Eric'Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/Carthage去中心化依赖管理/" itemprop="url">
                  Carthage去中心化依赖管理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-24T17:12:35+08:00">
                2016-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://octgh9scz.bkt.clouddn.com/Carthage.png?attname=&amp;e=1481085369&amp;token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:t5TY_kk1x3ybOVRyXrcs-khXUOI" alt="img"></p>
<p>####为什么用carthage<br>很多ios开发者大概对CocoaPods并不陌生，我们几乎已经习惯了在pod文件中添加一行即可将一个库导入到自己的工程中，不得不说，在ios开发的历史中CocoaPods功不可没，提供了很大的便利性。这里我向大家介绍一个新的第三方库管理工具<a href="https://github.com/Carthage/Carthage" target="_blank" rel="external">Carthage</a>,Carthage的优点是在于其非侵入性,Carthage创建的是去中心化的依赖管理器。它没有总项目的列表，这能够减少维护工作并且避免任何中心化带来的问题（如中央服务器宕机）。不过，这样也有一些缺点，就是项目的发现将更困难，用户将依赖于Github的趋势页面或者类似的代码库来寻找项目。</p>
<p>CocoaPods projects must also have what’s known as a podspec file, which includes metadata about the project and specifies how it should be built. Carthage uses xcodebuild to build dependencies, instead of integrating them into a single workspace, it doesn’t have a similar specification file but your dependencies must include their own Xcode project that describes how to build their products.</p>
<p>CocoaPods会直接创建和修改项目的workspace配置，一切都是为了便捷，我们只需要修改pod文件并不需要过多的关心其他事情，CocoaPods创建的是高度集成的项目。 而Carthage的特点是灵活，耦合度不高，集成时不需要集成相应的project，不需要创建workspace,而仅仅需要依赖打包好的framework文件即可。</p>
<p>####怎么用carthage</p>
<p>#####直接用.pkg安装包安装<br>这里是下载地址<a href="https://github.com/Carthage/Carthage/releases/tag/0.18.1" target="_blank" rel="external">https://github.com/Carthage/Carthage/releases/tag/0.18.1</a></p>
<p>#####用homebrew<br>打开终端,依次输入:<br><code>brew update</code><br><code>brew install carthage</code><br>安装之后可以用<code>carthage version</code>查看当前版本,确认安装成功  </p>
<p>#####使用<br>在你的工程里创建一个Cartfile文件 ,并在里面写上类似下面这句话<br><code>github &quot;SwiftyJSON/SwiftyJSON&quot;</code><br>执行<code>carthage update</code><br>会在工程目录里生成一个Carthage的文件夹,里面有自动生成的framework,然后将其拖入这个目录下边Embedded Binaries<br><img src="http://octgh9scz.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-12-07%20%E4%B8%8B%E5%8D%887.18.16.png?attname=&amp;e=1481113520&amp;token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:4xxIoMP7wcuSYu8gDrKrZ4Xlua8" alt="img"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoururl.com/2016/12/24/iOS开发-跳转第三方支付遇到的小问题/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Eric">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://octgh9scz.bkt.clouddn.com/chunyang.jpeg?attname=&e=1482553833&token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:dSl5qVAdWDhwneji7ZP7NIOPZ9w">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Eric'Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Eric'Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/iOS开发-跳转第三方支付遇到的小问题/" itemprop="url">
                  iOS开发-跳转第三方支付遇到的小问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-24T17:12:24+08:00">
                2016-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.首先是最常见的微信订单号重复的问题,这里做的操作就是在拿到服务器的订单号之后,APP端随机在后边追加两个字符串,这样就可以避免这个问题.</p>
<p>2.如果服务器生成的订单号过长的话也会调起失败,返回:订单号长度错误.</p>
<p>3.第三个问题相对于前两个来说比较隐蔽,刚跳转到第三方支付之后,不在第三方如:微信,支付宝做任何操作,然后通过双击home键或者点击左上角的方式返回自己的应用,这时候是收不到任何的回调,这样造成的结果就是程序界面仍然停留在收银台页面,这样用户继续点击就会造成重复下单的BUG,是一个比较麻烦的问题.初步想到的解决办法即时性的都不能解决.最后想到了一个稍微讨巧的办法,首先如果这个程序是通过支付跳转到第三方的,就加一个布尔值apinPayGO,当程序从后台进入前台时就发出通知,.经过实际测试,支付的回调实在系统的运行方法之后的,收银台页面在接收到该通知之后,延迟一秒执行方法,判断系统这次从后台进入前台是否经过了支付第三方的回调方法,如果经过了支付第三方的回调方法就不做任务操作,如果没经过第三方的回调方法,证明用户在跳转到第三方时没做任务操作,直接通过iOS系统返回到自己的应用了,这里就把页面跳转到待支付页面,然后开始倒计时!</p>
<ul>
<li>(void)applicationWillEnterForeground:(UIApplication*)application{</li>
</ul>
<p>NSLog(@”EnterForeground”);</p>
<p>if(self.apinPayGO) {</p>
<p>NSNotificationCenter*center = [NSNotificationCenterdefaultCenter];</p>
<p>[centerpostNotificationName:@”payReturn”object:nil];</p>
<p>}</p>
<p>}</p>
<p>4.创建订单,支付中间的时间控制问题.</p>
<p>用户点击创建订单,服务器设置一个超时时间十分钟,需要用户在十分钟内完成支付,直接去操作是没什么问题.但是如果不直接操作,第三方的支付超时时间跟服务器订单储存的超时时间不同步,可能出现的情况就是:服务器这边订单已经失效了,但是第三方支付仍可以支付,出现bug.有个预想的处理方法是:支付前进行查询订单操作,服务器返回一个超时时间,然后进行第三方支付时把这个超时时间设置过去.但是在做的过程中又遇到了新的问题:第三方支付的超时时间有限制,支付宝是1min~15d,微信是要大于五分钟.</p>
<p>解决方案:创建订单 跟调第三方支付创建订单 同时进行,然后第一次支付的时候设置超时时间.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoururl.com/2016/12/24/iOS自己动手篡改APP网络请求及简单防护/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Eric">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://octgh9scz.bkt.clouddn.com/chunyang.jpeg?attname=&e=1482553833&token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:dSl5qVAdWDhwneji7ZP7NIOPZ9w">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Eric'Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Eric'Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/iOS自己动手篡改APP网络请求及简单防护/" itemprop="url">
                  iOS自己动手篡改APP网络请求及简单防护
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-24T17:12:05+08:00">
                2016-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在开始谈技术干货之前,先大概说一下这次公司APP安全风波的始末,甩锅的理由有三,其一:创业公司凡事讲究敏捷开发,快速迭代上线,因此在完成功能需求之余无暇他顾;其二:安全问题应该为技术总监着重考虑的一点,但是(按照惯例,这里省略N字,不可描述);其三:后台接口定义也没有考虑到这一点,然而,从不要随便甩锅的好习惯来说,我还是要负起责任的,毕竟自己是iOS负责人,要对APP有个全面的把握.</p>
<p>简单的讲下事情经过,就是突然有一天下午,一个用户打电话给客服说自己买了一张998元的机票买错了,想退票,要求公司给他取消订单退钱,然后还把支付宝的网页支付记录发了过来(后来证实是PS过的).然后财务部那边查账之后发现这个用户的支付宝账号确实付款了,但实际付款的只有1元,然后公司财务就把事情反馈给了副总,然后整个技术部就炸锅了,都在各抒己见分析这个1元钱是怎么通过APP付款到公司账户的,因为机票订单是没有1元的.而且APP和支付宝给后台的回调都是支付成功的.根据唯物主义思想来推断,支付宝出错的概率远小于我们APP出错的概率,而且后台也没有被攻入的迹象,因此就把问题锁定在APP上了,然后我们用的POST请求(一些人说比较安全,其实不加密的话,安全性和GET请求比起来相差无几),我们部门的首席科学家直接说APP肯定是被反编译了,原话是”我找我阿里的朋友帮忙,分分钟就把APP反编译了,然后随便下单.”当时听了这话我是懵逼的,虽然从技术可操作性来说,存在反编译的可能,但是分分钟不费吹灰之力就反编译这种说法我是不太能接受的,然后就有了后边我自己攻击自己APP的举动.  </p>
<p>##正题<br>我的分析就是反编译太麻烦,不容易实施,而且即使反编译出来了,一个类名一个方法名的去解析APP也很累,所以就从相对好实施的篡改网络请求及返回数据下手!之前看过唐巧大神的一篇关于Charles的使用讲解,不过当时是用来简单的抓别人的包,用点数据就放下了,现在就拿来实践一下篡改数据这个功能,首先安装好Charles,然后按部就班的把Charles设置为自己mac电脑的代理,<img src="http://upload-images.jianshu.io/upload_images/1392599-a688db3407fce594.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"><br>然后手机连自己电脑wifi,或者跟电脑连接同一个wifi都可以,然后设置手机的代理,让你手机的网络请求都经过Charles,服务器里填写的是电脑的IP地址,<img src="http://upload-images.jianshu.io/upload_images/1392599-b8c6765b079285ca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img">端口默认的就是8888:<img src="http://upload-images.jianshu.io/upload_images/1392599-7c80cfb2c3ecfaaf.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"><br>这样就可以抓到APP跟服务器之间的网络请求了.然后在查看请求之后去使用篡改功能,这里就演示一下篡改一个页面的数据<img src="http://upload-images.jianshu.io/upload_images/1392599-4f2eea2f4d13660c.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img">这里的第一个票价是12500,下边是拦截到的请求<img src="http://upload-images.jianshu.io/upload_images/1392599-8dacca0618ca7e20.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img">给这个IP地址对应的8080端口的请求都加上断点,点击那个Breakpoints,然后当下一次请求进来的时候,就可以直接篡改数据<img src="http://upload-images.jianshu.io/upload_images/1392599-85b4e6633b869a8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img">篡改数据的步骤可以看下方的gif图:<br><img src="http://upload-images.jianshu.io/upload_images/1392599-e0dd87283540404e.gif?imageMogr2/auto-orient/strip" alt="img">之后点击”Execute”,返回给APP数据,这样APP展示的页面就变成了:<img src="http://upload-images.jianshu.io/upload_images/1392599-256d3877c2aa17a1.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img">到这里用户的骗术就被还原了,当然后边还需要篡改一些数据才能成功去下单支付这个1元订单,细节就不在赘述了<img src="http://upload-images.jianshu.io/upload_images/1392599-29b041f86f86fc2a.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img">那个支付宝支付显示不全是因为iOS10字变宽了,当然支付成功之后的心情是很复杂的,毕竟自己的APP被这么轻易搞出问题了,大家可以设身处地想一下哈,后边重点来了,讲解一下小公司的解决方案.<br>因为开发压力比较大,所以要考虑性价比比较高的方案,这里就暂时舍弃了HTTPS,运用了实施起来相对简单的MD5加密,这里有两种情况,下载加密和上传加密,比如说刚才看到的订单列表就属于下载加密,要确保订单列表数据一旦被篡改就不去使用,而点击立即支付的下单动作就是上传加密,要确保传给服务器的下单参数一旦被篡改就不去使用,MD5加密的原理就不在这里讲了,因为我之前的文章JSPatch里已经讲过了,主要说一下具体的实施细节以及过程中遇到的小坑,首先是下载加密:<img src="http://upload-images.jianshu.io/upload_images/1392599-408ce2ee0d0506e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"><br>我用的网络请求是自己封装的AFN,然后这里设置一下直接字符串取值,不要转成JSON:<code>manager.responseSerializer = [AFHTTPResponseSerializer serializer];</code><br>取出HTTP Header里的验证字串:<br><code>NSDictionary *headerDic = [operation.response allHeaderFields];</code><br>  <code>NSString *rsaValue = headerDic[@&quot;rsaValue&quot;];</code><br>然后取值:<code>NSString *responseObjectStr = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];</code><br>加密:<code>NSString *md5Str = [NSString stringWithFormat:@&quot;%@%@&quot;, responseObjectStr, md5SaltValue];</code><br>然后进行比对校验<code>[[md5Str getMd5_32Bit] isEqualToString:headerDic[@&quot;rsaValue&quot;]]</code><br>然后是上传加密:<img src="http://upload-images.jianshu.io/upload_images/1392599-a0380e7b76a53fac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"><br>把所有参数转换为String:<code>String *jsonString = [self.orderModel yy_modelToJSONString];</code><br>加密:<code>NSString *md5Value = [[NSString stringWithFormat:@&quot;%@%@&quot;,jsonString,md5SaltValue] getMd5_32Bit];</code><br>设置请求头:<code>[manager.requestSerializer setValue:md5Value forHTTPHeaderField:@&quot;rsaValue&quot;];</code><br>到这里,这篇文章算是告一段落,后边应该会更新一系列安全相关的文章,不过需要一个我去学习然后理解然后实践的过程~下一篇是动手去反编译自己APP开始踩坑之旅.当然都是我自己的浅显青铜操作,欢迎同学们指点及大神们一笑而过.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoururl.com/2016/12/24/JSPatch技术文档-要点总结/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Eric">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://octgh9scz.bkt.clouddn.com/chunyang.jpeg?attname=&e=1482553833&token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:dSl5qVAdWDhwneji7ZP7NIOPZ9w">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Eric'Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Eric'Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/JSPatch技术文档-要点总结/" itemprop="url">
                  JSPatch技术文档--要点总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-24T17:11:46+08:00">
                2016-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>点进来的同学应该是对JSPatch有初步的了解了,主要在此介绍一下我的学习总结:</p>
<ol>
<li>首先要了解OC代码如何转换为JS代码,语法层面</li>
<li>如何实现动态,即如何通过服务器进行脚本下发</li>
<li>与后台协调如何更好解决多个版本下发的问题</li>
<li>JSPatch安全问题,如果没有对JSPatch脚本加密,攻击者就会通过网络传输的中间人攻击手段下发恶意脚本到用户APP.接入JSPatch时请做好加密传输,只要做RSA非对称加密传输就不会有问题.</li>
<li>充分测试问题,灰度测试</li>
<li>防止连续crash</li>
<li>实现原理(OC与JS的调用,OC黑科技runtime)</li>
</ol>
<h2 id="一丶OC转换为JS代码"><a href="#一丶OC转换为JS代码" class="headerlink" title="一丶OC转换为JS代码"></a>一丶OC转换为JS代码</h2><p>###1.1 require<br>在使用OC类之前需要调用require(‘className’):<br><code>require(&#39;UIView&#39;)</code><br><code>var view = UIView.alloc().init()</code><br>或者在使用时去调用<br><code>require(&#39;UIView&#39;).alloc().init()</code></p>
<p>###1.2 调用OC方法<br>调用类方法: <code>var redColor = UIColor.redColor</code><br>获取Property就等于调用这个Property的getter方法:<code>view.setBackgroundColor(redColor);</code><br>修改这个值就等于调用了setter方法:<code>view.setBackgroundColor(redColor);</code><br>方法名转换,多参数要用_分割:`var indexPath = require(‘NSIndexPath’).indexPathForRow_inSection(0,1);</p>
<p>这里只是简单介绍一下转换方法,其它的具体转换方法,请参考<br><a href="https://github.com/bang590/JSPatch/wiki/JSPatch-%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95" target="_blank" rel="external">JSPath作者,bang的文档</a><br>在平常使用过程中,作者提供了一个OC转JS代码的工具,点击这里查看:<br><a href="https://github.com/bang590/JSPatchConvertor" target="_blank" rel="external">JSPatch Conver</a>,可以先写好要改动的OC代码,然后用工具进行转换,然后检查转换后的代码是否有误,确认无误之后,进入下一步测试阶段.</p>
<h2 id="二丶下发JS脚本"><a href="#二丶下发JS脚本" class="headerlink" title="二丶下发JS脚本"></a>二丶下发JS脚本</h2><p>###2.1 版本管理<br>因为不同的版本存在的bug不同,而且新的版本已经把旧版本已知的bug修复,所以在下发版本的时候,一定要做版本的区分.同一版本也可对应多个修复文件,对应同一APP版本的新版本补丁覆盖旧版本补丁,如下图:<br><img src="http://upload-images.jianshu.io/upload_images/1392599-23a659d25a8a6fb9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<h3 id="2-2-下载使用策略"><a href="#2-2-下载使用策略" class="headerlink" title="2.2 下载使用策略"></a>2.2 下载使用策略</h3><p>这里本来是计划把下载和使用都放在didFinishLaunchingWithOptions：这个方法里,这里参考了一位同行的<a href="http://www.cnblogs.com/dsxniubility/p/5080875.html" target="_blank" rel="external">做法</a>,使用js文件的代码放在didFinishLaunchingWithOptions： 而下载js文件的代码放在applicationDidBecomeActive: 因为这个方法在程序启动和后台回到前台时都会调用。然后设置一个间隔时间，根据一些数据和权衡之后我们采用的是间隔时间设为1小时。 也就是说每次来到这个方法时，先要检测是距离上次发请求的时间间隔是否超过1小时，超过则发请求，否则跳过。如下图:<br><img src="http://upload-images.jianshu.io/upload_images/1392599-8f4ea56890a596eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<h3 id="2-3-仓库设置"><a href="#2-3-仓库设置" class="headerlink" title="2.3 仓库设置"></a>2.3 仓库设置</h3><p>仓库设置也要有个规范的流程,不能乱来,要不然后期可维护性比较差.对于一个APP来说,有多个版本即分为多个文件夹,然后在文件夹里放入JS文件,供客户端下载,同时也可以在JS文件同层放入json文件来自定义这个流程.</p>
<h2 id="三丶安全问题"><a href="#三丶安全问题" class="headerlink" title="三丶安全问题"></a>三丶安全问题</h2><p>使用JSPatch主要有两个安全问题,传输安全:JS脚本可以调用任意OC方法,权限非常大,若被中间人攻击替换代码,会造成较大的危害;执行安全:下发的JS脚本灵活度大,相当于一次小型更新,若未进行充分测试,可能出现crash等情况.</p>
<h3 id="传输安全"><a href="#传输安全" class="headerlink" title="传输安全"></a><strong>传输安全</strong></h3><p>我们的目的是防止传输过程中数据被篡改,然后做了一些危害程序的操作,而我们还傻乎乎的去执行这个文件- -,所以这里选择作者倾情推荐的安全性高,部署简单,门槛低的方案:RSA校验.这种方式属于数字签名,用了跟HTTPS一样的非对称加密,把非对称加密只用于校验文件,不解决传输过程中数据内容泄露的问题.整个校验过程如下:<br><img src="http://upload-images.jianshu.io/upload_images/1392599-c9ff4ae1f42aa20e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<ol>
<li>服务端计算出脚本文件的MD5值,作为这个文字的数字签名.</li>
<li>服务端通过私钥加密第1步算出的MD5值,得到一个加密后的MD5值.</li>
<li>把脚本文件和加密后的MD5值一起下发给客户端.</li>
<li>把客户端拿到的已经加密过的MD5值,通过保存在客户端的公钥解密.</li>
<li>客户端计算脚本文件的MD5值.</li>
<li>比对第4步和第5步的两个MD5值(分别是客户端和服务端计算出来的MD5值),如果相等则通过校验.</li>
</ol>
<p>只要通过校验,就可以确保脚本在传输过程中没有被篡改,因为第三方若要篡改脚本文件,必须要计算出新的脚本文件MD5并用私钥加密,客户端公钥才能解密出这个MD5值,而在服务器未泄露的情况下第三方是拿不到私钥的.</p>
<h3 id="执行安全"><a href="#执行安全" class="headerlink" title="执行安全"></a><strong>执行安全</strong></h3><p>因为一旦下发JS脚本,就代表客户端就会根据脚本文件执行方法(如果JS脚本替换类的方法写错了,当我没说…),如果某个地方的代码写的不够严谨,就可能导致大量crash,或者是一些奇怪的问题.需要有一些机制来避免这种情况发生.若要做的完整,可以分为:事发前(灰度),事发中(监控),事发后(回退).</p>
<h4 id="灰度"><a href="#灰度" class="headerlink" title="灰度"></a>灰度</h4><p>首先需要在事发前把出现问题的影响面降到最低，对于中大型 APP，不能一次把脚本下发给所有用户，需要有灰度机制，也就是一开始只下发给其中一部分用户，看看会不会出现异常情况，再逐步覆盖到所有用户。有条件的话灰度的用户最好按机型/系统/地域等属性随机分配，尽量让最少的人覆盖到大部分情况。</p>
<p>####监控<br>接着是事发了我们需要知道脚本有问题，需要对 APP 有一些监控机制，像 crash 监控，这个一般所有 APP 都有接入，再按需求自行加入其他监控指标。</p>
<p>####回退<br>最后是事发后回退代码。一般为了避免不可预料的情况出现，JSPatch 脚本建议在启动时执行，APP 运行过程中不去除，所以这个回退建议的实现方式是后台下发命令，让 APP 在下次启动时不执行 JSPatch 脚本即可。<br>但这里能回退的前提是 APP 可以接收到后台下发的回退命令，若因为下发的脚本导致 APP 启动即时 crash，这个回退命令也会接收不到。所以建议再加一层防启动 crash 的机制，APP 在连续启动即 crash 后，下次启动不再执行脚本文件。<br>这里需要补充一下,JS脚本引起的crash按崩溃的阶段可分为:</p>
<ol>
<li>调用到JS脚本里修改后的方法引起崩溃,这种可以通过下发新的JS脚本来解决.</li>
<li>APP启动即崩溃,这种情况已经不能通过下发脚本解决.要有专门的防止连续crash的解决方案.</li>
</ol>
<h4 id="连续crash解决方案"><a href="#连续crash解决方案" class="headerlink" title="连续crash解决方案"></a>连续crash解决方案</h4><p>(………)等我专门研究清楚了重开一篇~~~</p>
<p>在文末帮偶像bang推荐一下他的JSPatch平台,大家如果由于某些原因不通过自家服务器下发脚本,可以通过这个平台来进行脚本的下发:<a href="http://www.jspatch.com/" target="_blank" rel="external">JSPatch平台</a>.<br>有问题欢迎联系我沟通交流,QQ:364385155.顺便给俺点个喜欢更好~</p>
<p>#####参考资料</p>
<ol>
<li><a href="https://github.com/bang590/JSPatch" target="_blank" rel="external">https://github.com/bang590/JSPatch</a></li>
<li><a href="http://www.cnblogs.com/dsxniubility/p/5080875.html" target="_blank" rel="external">http://www.cnblogs.com/dsxniubility/p/5080875.html</a></li>
<li><a href="http://www.jianshu.com/p/0cb81bf23d7a" target="_blank" rel="external">http://www.jianshu.com/p/0cb81bf23d7a</a></li>
<li><a href="http://blog.cnbang.net/" target="_blank" rel="external">http://blog.cnbang.net/</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoururl.com/2016/12/24/iOS构建流程/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Eric">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://octgh9scz.bkt.clouddn.com/chunyang.jpeg?attname=&e=1482553833&token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:dSl5qVAdWDhwneji7ZP7NIOPZ9w">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Eric'Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Eric'Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/iOS构建流程/" itemprop="url">
                  iOS构建流程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-24T17:11:32+08:00">
                2016-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###1. 项目初始化(git托管:bitbucket,gitlab等)</p>
<p>###2. 框架搭建:MVC MVVM</p>
<p>###3. 网络工具类构筑:AFN等</p>
<p>###4. 视图工具类构筑:Marsory等</p>
<p>###5. 第三方管理工具:Cocoapods,Cathage</p>
<p>###6. 功能模块划分:业务模块分解</p>
<p>###7. 具体功能实现:时间占比最高的</p>
<p>###8. 遇到问题:1)bug上报:腾讯bugly 2)热修复:JSPatch</p>
<p>###9. 用户信息采集:友盟等第三方</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoururl.com/2016/12/24/实战篇-手把手教你搭建ghost博客/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Eric">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://octgh9scz.bkt.clouddn.com/chunyang.jpeg?attname=&e=1482553833&token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:dSl5qVAdWDhwneji7ZP7NIOPZ9w">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Eric'Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Eric'Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/实战篇-手把手教你搭建ghost博客/" itemprop="url">
                  实战篇-手把手教你搭建ghost博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-24T17:09:30+08:00">
                2016-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>####一.购买域名,服务器<br>   购买的渠道很多,我是直接在阿里云官网把两个买齐的.买域名没什么需要注意的,搜一下自己喜欢的域名然后按步骤购买就可以了.<br>   买服务器的话,最低配置就可以满足需求了,操作系统要选择UBuntu 64位系统,带宽1M,具体配置如下:<br><img src="http://upload-images.jianshu.io/upload_images/1392599-0ef1bab4f2c08f5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>买完服务器之后就可以进行域名解析啦,域名解析如下,添加两条就可以了<br><img src="http://upload-images.jianshu.io/upload_images/1392599-2b8ed8034c8bb2f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<p>####二.配置服务器</p>
<p>#####2.1 连接服务器<br>Linux/Mac OS X系统的电脑</p>
<ol>
<li>打开SSH客户端</li>
<li>用户名：root    实例：120.26.xxx.xxx</li>
<li>输入实例密码进行登录。  </li>
</ol>
<p>Windows系统的电脑</p>
<ol>
<li>下载安装Windows SSH和Telnet客户端Putty。 下载Putty</li>
<li>用户名：root    实例：120.26.xxx.xxx</li>
<li>按照Putty使用帮助进行登录。Putty使用帮助  </li>
</ol>
<p><code>ssh root@120.26.xxx.xxx</code><br>点击回车,然后输入你的服务器密码,如果密码无误就会出现欢迎界面.  </p>
<p>#####2.2 安装Node.js&amp;Nginx<br><code>sudo apt-get update  
sudo apt-get install -y python-software-properties python g++ make 
sudo add-apt-repository ppa:chris-lea/node.js</code><br>如果敲上面的代码出现: add-apt-repository: command not found ,需要先安装才能继续进行:<br><code>sudo apt-get install python-software-properties  
sudo apt-get install software-properties-common</code><br>安装完成之后继续执行下面的命令:<br><code>sudo add-apt-repository ppa:chris-lea/node.js  
sudo apt-get update
sudo apt-get install nodejs</code><br>都执行完之后用<code>node -v</code>查看安装是否成功:v0.10.37<br><code>npm -v</code>:1.4.28<br>接下来安装Nginx: <code>sudo apt-get install nginx</code></p>
<p>#####2.3 安装MySQL<br>用MySQL数据库来管理存储博客的数据<br><code>sudo apt-get install mysql-server</code><br>安装过程中系统会让你给root用户设置密码,<img src="http://upload-images.jianshu.io/upload_images/1392599-b1a2cae99dce1ae1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>如果安装过程中出现 mysql Access denied for user ‘root’@’localhost’ (using password:YES) 解决方案:  </p>
<ol>
<li>打开MySQL目录下的my.ini文件，在文件的最后添加一行“skip-grant-tables”，保存并关闭文件。  </li>
<li>重启MySQL服务。</li>
<li>在命令行中输入“mysql -uroot -p”(不输入密码)，回车即可进入数据库。</li>
<li>执行，“use mysql;”使用mysql数据库。</li>
<li>执行，“update user set password=PASSWORD(“rootadmin”) where user=’root’;”（修改root的密码）<br>(期间我还select下user表中的记录，查询全部的时候显示了一些乱码，然后我只查询了user表中的Host、User、Password字段，貌似当时显示了3条记录，有1个没有名称。当然，为了解决问题，这些我也管不了了。)  </li>
<li>打开MySQL目录下的my.ini文件，删除最后一行的“skip-grant-tables”，保存并关闭文件。</li>
<li>重启MySQL服务。</li>
<li>在命令行中输入“mysql -uroot -prootadmin”，问题搞定！<br>实际解决方案:删除mysql,重新安装<br>安装完MySQL后,设置utf8<br>执行命令: <code>cd /etc/mysql</code><br>编辑my.conf文件: <code>vi my.cnf</code><br>然后去修改一下配置文件,点击i进入插入模式<br><code>[mysqld]
collation-server = utf8_unicode_ci  
init-connect=&#39;SET NAMES utf8&#39;
character-set-server = utf8</code><br>编辑完成之后,按ESC 然后 输入 <code>:wq</code>,保存并退出编辑.然后重启MySQL,<br><code>service mysql restart</code><br>之后我们来检查一下修改是否正确,进入MySQL命令行界面:<br><code>mysql -uroot -p</code><br>输入之前设置的MySQL密码,然后输入指令:<br><code>show variables like &#39;collation%&#39;;</code>,检查键值对是否一致,如果不一致,就去打开刚才的配置文件检查修改的是否有误.<br>#####2.4 创建ghost数据库,配置Nginx</li>
</ol>
<ul>
<li>为ghost创建一个MySQL数据库,执行如下命令:<br><code>mysql -uroot -p -e &#39;create database ghost;&#39;</code><br>系统会提示你输入密码,输入刚才设置的MySQL的root用户的密码  </li>
<li>我们要用Nginx做ghost的前段代理服务.首先进入Nginx目录下:<br><code>cd /etc/nginx/sites-available/</code><br>然后创建并且编辑ghost.conf配置文件:<br><code>sudo touch ghost.conf</code><br><code>sudo vi ghost.conf</code><br><code>server
{
  listen 80; 
  server_name ericze.com; //替换为你自己的域名！
  location / { proxy_set_header X-Real-IP $remote_addr; 
  proxy_set_header Host $http_host;
  proxy_pass http://127.0.0.1:2368; 
}
}</code><br>然后为ghost.conf文件做一个软连接到当前目录下(这一步不知道是为啥),反正照着做吧:<br><code>sudo ln -s /etc/nginx/sites-available/ghost.conf /etc/nginx/sites-enabled/ghost.conf</code>  </li>
<li>通过npm start 启动ghost的话,如果关闭了远程连接,Ghost也就停了,因此需要一个文件改动监听且自动重启的工具:forever来解决这个问题,输入一下命令安装forever:<br><code>sudo npm install forever -g</code><br>#####2.5 安装Ghost<br>现在前戏已经做足,重头戏登场,这里我参考的文章里给的方法都不太对,我稍微花了点时间去查找.因为下载的是zip文件,所以先下载个解压工具,<br>进入srv文件夹:<code>cd /srv/</code><br>下载解压工具:<code>sudo apt-get install unzip</code><br>然后去下载Ghost: <code>sudo wget http://dl.ghostchina.com/Ghost-0.7.4-zh-full.zip</code>,这个地址是我当时下载的最新版,如果要下载最新版,可以直接去官网拷贝,地址为: <a href="http://www.ghostchina.com/download" target="_blank" rel="external">Ghost官网下载地址</a>.<br>然后解压ghost: <code>sudo unzip ghost.zip -d ghost</code><br>解压之后,进入Ghost目录修改配置文件:<code>cd /srv/ghost/</code><br>拷贝一份配置文件模板:<code>sudo cp config.example.js config.js</code><br>然后打开配置文件进行编辑:<code>sudo vi config.js</code>  </li>
</ul>
<p>配置文件里边有两种数据库,上边的是sqlit3的,把那个注释掉,然后下边那个是MySQL的配置,把这个注释打开,注意操作过程中不要出错.这里只修改一下生产环境的配置信息,具体修改如下:<br><code>// ### Production
// When running Ghost in the wild, use the production environment 
// Configure your URL and mail settings here
production: {                                                                 
  url: &#39;http://ghostchina.com&#39;, //替换为你自己的域名。                           
  mail: {},  
  database: {                                                              
    updateCheck: false,                                                           
    client: &#39;mysql&#39;,                                                          
    connection: {                                                                     
    host : &#39;127.0.0.1&#39;,                                                               
    user : &#39;root&#39;, //我们暂且用 MySQL 的 root 账户                                  
    password : &#39;123456&#39;, //输入你的 MySQL 密码                                   
    database : &#39;ghost&#39;, //我们前面为 Ghost 创建的数据库名称                        
    charset : &#39;utf8&#39;
    }                                                               
  },  
server: {                                                                            
    // Host to be passed to node&#39;s `net.Server#listen()`                                  
    host: &#39;127.0.0.1&#39;,                                                             
    port: &#39;2368&#39;                                                                    
  }                                                                               
},</code><br>编辑完成之后最好检查一下,因为随便输错一个字符,就要从头排查错误,很伤!<br>比对无误之后,按ESC,然后输入 <code>:wq</code>保存并退出编辑.  </p>
<ul>
<li>安装ghost依赖库  打开ghost系统的目录下面的package.json文件,将”sqlite3”:  “2.2.0”, 这一行删除掉（注意，你看到的 sqlite 版本可能会不一样，但是，只是 sqlite3 字样，删除即可,不要注释上，一定要把那一行删除了）.<br>接下来,进入存放Ghost目录下,安装所以来的npm包:<br><code>cd /srv/ghost</code><br><code>sudo npm install --production</code><br>当所有依赖包安装好之后,目录下就多出一个 node_modules 目录.<br>######终于可以启动ghost了！<br>执行如下命令重启Nginx：<br><code>sudo service nginx restart</code><br>然后进入ghost文件目录：<code>cd /srv/ghost</code><br>使用forever工具启动ghost：<code>sudo NODE_ENV=production forever start index.js</code><br>然后打开浏览器输入你的域名就可以看到ghost画面了，如果你的域名没有备案的话，可以先输入服务器地址查看页面，书写博客。<br><img src="http://upload-images.jianshu.io/upload_images/1392599-978089cd4b585386.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>在搭建过程中遇到什么问题，可以联系我交流问题。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://octgh9scz.bkt.clouddn.com/chunyang.jpeg?attname=&e=1482553833&token=LNefbQ5CufvndBztjWvk21WSnMYonbt9dtsORbSJ:dSl5qVAdWDhwneji7ZP7NIOPZ9w"
               alt="Eric" />
          <p class="site-author-name" itemprop="name">Eric</p>
          <p class="site-description motion-element" itemprop="description">怕什么真理无穷,进一寸有一寸的欢喜</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ericze" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eric</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  




  
  

  

  

  

  


</body>
</html>
